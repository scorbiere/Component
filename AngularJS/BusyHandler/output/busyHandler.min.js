"use strict";angular.module("BusyHandler",[]),angular.module("BusyHandler").factory("BusyService",[function(){var u={};return{add:function(n,e){u[n]||(u[n]={toCall:[]}),u[n].toCall.push(e)},remove:function(n,e){u[n]&&(position=$.inArray(e,u[n].toCall),~position&&u[n].toCall.splice(position,1))},setBusy:function(n,e){u[n]&&angular.forEach(u[n].toCall,function(u){u&&u(e)})}}}]),angular.module("BusyHandler").directive("busyAreaName",["BusyService",function(u){return{restrict:"A",scope:{busyAreaName:"@"},link:function(n,e,s){var i=function(u){u?e.block({message:null,overlayCSS:{backgroundColor:"#707070"}}):e.unblock()};u.add(n.busyAreaName,i),n.$on("$destroy",function(){u.remove(n.busyAreaName,n.setBusy)})}}}]),angular.module("BusyHandler").directive("busyClick",["BusyService",function(u){return{restrict:"A",scope:{busyName:"@",busyClick:"&"},link:function(n,e,s){n.isBusy=!1;var i=function(u){n.isBusy=u},r=function(){if(n.isBusy)return!1;u.setBusy(n.busyName,!0);var e=n.busyClick();angular.isDefined(e)&&angular.isFunction(e.then)?e.then(function(){u.setBusy(n.busyName,!1)},function(){u.setBusy(n.busyName,!1)}):u.setBusy(n.busyName,!1)};u.add(n.busyName,i),e.bind("click",r),n.$on("$destroy",function(){u.remove(n.busyName,n.setBusy),e.unbind("click",r)})}}}]),angular.module("BusyHandler").directive("busyFormName",["BusyService",function(u){return{restrict:"A",scope:{busyFormName:"@",busyFormSubmit:"&"},link:function(n,e,s){n.isBusy=!1;var i=function(u){n.isBusy=u},r=function(){if(n.isBusy)return!1;u.setBusy(n.busyFormName,!0);var e=n.busyFormSubmit();angular.isDefined(e)&&angular.isFunction(e.then)&&e.then(function(){u.setBusy(n.busyFormName,!1)},function(){u.setBusy(n.busyFormName,!1)})};u.add(n.busyFormName,i),e.bind("submit",r),n.$on("$destroy",function(){u.remove(n.busyFormName,n.setBusy),e.unbind("submit",r)})}}}]);